<!DOCTYPE html>

<head>
  <title>Cost Split Calculator</title>
</head>
<style>

  input[type="radio"]:not(:checked) + div {
  display: none; 
}

input[type="radio"]:checked + div {
  display: 'block';
}
 
 .error {
   color: red;
 }

</style>

<body>
  <main class="container">
    <h2>Cost Splitter</h2>
    <section>
      <!-- amount to split -->
      <label for='amt'>Amount
        <input type='number' id="amt" />
      </label>
      <!-- choice of how to split -->
      <div>
        <label for="splitByPerson">Split cost by person</label>
        <input type="radio" id="splitByPerson" name="split-cost" value="byPerson" checked>

        <div class='byPerson'>
          <label for=people>Number of people<input type='number' id="splitCost" /></label>
          <button id="btn">Split!!</button>
          <p id="textField"></p>
        </div>
      </div>
    </section>

    <section>
      <label for="splitByPercent">Split cost by percent</label>
      <input type="radio" id="splitByPercent" name="split-cost" value="byPercent">

      <div class='byPercent'>
        <div>
          <input type='text' id="name" placeholder="Name" />
          <input type='number' id="firstPerson" placeholder="%" />
        </div>
        <div>
          <input type='text' id="name" placeholder="Name" />
          <input type='number' id="secondPerson" placeholder="%" />
        </div>
        <button id='percentBtn'>Split</button>
        <p class='error'></p>
        <p id='firstPersonAmount'></p>
        <p id='secondPersonAmount'></p>
      </div>
    </section>

  </main>
  <script>
    const amountField = document.getElementById("amt");
    const splitCostField = document.getElementById("splitCost");
    const button = document.querySelector('button');
    const textField = document.querySelector("#textField");
    const firstPersonAmount = document.querySelector('#firstPersonAmount');
    const secondPersonAmount = document.querySelector('#secondPersonAmount');
    const firstPerson = document.querySelector('#firstPerson');
    const secondPerson = document.querySelector('#secondPerson');
    const radioBtns = document.querySelectorAll('input[type=radio]');
    const percentBtn = document.querySelector('#percentBtn');
    const names = document.querySelectorAll('input[id=name]');

    button.addEventListener('click', () => {
      let amount = +amountField.value;
      let splitCost = +splitCostField.value;

      const indvAmt = calculateAmount(amount, splitCost);

      const text = `Every person needs to pay ${indvAmt}`
      textField.innerHTML = text;
    });

    //onclick will calculate the amount and correct the percentages
    percentBtn.addEventListener('click', () => {
      let amount = +amountField.value;
      splitPercentage();
    })


    const splitPercentage = () => {
      let amount = +amountField.value;
      let first = +firstPerson.value / 100;
      let second = +secondPerson.value / 100;
      let error = document.querySelector('.error');

      if (first > 1 || second > 1) {
        return error.innerHTML = 'The percentage entered must be less than 100%. Please try again.';
      }
      if (first) {
        secondPerson.value = 100 - firstPerson.value;
        second = +secondPerson.value / 100;
      } else {
        firstPerson.value = 100 - secondPerson.value;
        first = +firstPerson.value / 100;
      }
      firstPersonAmount.innerHTML = `${names[0].value || 'One person'} will pay ${+(first * amount).toFixed(2)}`;
      secondPersonAmount.innerHTML = `${names[1].value || 'The other person'} will pay ${+(second * amount).toFixed(2)}`;
    }


    const calculateAmount = (amount, splitCost) => {
      let indvi_amt = amount / splitCost;
      return indvi_amt;
    }
  </script>
</body>

</html>